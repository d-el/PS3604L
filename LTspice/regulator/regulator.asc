Version 4
SHEET 1 3336 788
WIRE -240 -1296 -640 -1296
WIRE -176 -1296 -240 -1296
WIRE -96 -1296 -176 -1296
WIRE 96 -1296 -16 -1296
WIRE -688 -1232 -704 -1232
WIRE -640 -1152 -640 -1200
WIRE -240 -1120 -240 -1296
WIRE -704 -1072 -704 -1232
WIRE -704 -1072 -784 -1072
WIRE -640 -1072 -704 -1072
WIRE -432 -1072 -640 -1072
WIRE -304 -1072 -352 -1072
WIRE 288 -1056 0 -1056
WIRE -944 -1024 -1056 -1024
WIRE -848 -1024 -864 -1024
WIRE -176 -1024 -240 -1024
WIRE -176 -976 -176 -1024
WIRE -80 -976 -112 -976
WIRE -48 -976 -80 -976
WIRE -784 -944 -784 -976
WIRE -80 -912 -80 -976
WIRE 0 -912 0 -960
WIRE 976 -912 912 -912
WIRE 1088 -912 1024 -912
WIRE 1200 -912 1136 -912
WIRE 1312 -912 1248 -912
WIRE 0 -864 0 -912
WIRE 128 -864 0 -864
WIRE 304 -864 192 -864
WIRE 0 -832 0 -864
WIRE 976 -832 976 -912
WIRE 1024 -832 976 -832
WIRE 1088 -832 1088 -912
WIRE 1136 -832 1088 -832
WIRE 1200 -832 1200 -912
WIRE 1248 -832 1200 -832
WIRE 1312 -832 1312 -912
WIRE 1360 -832 1312 -832
WIRE -176 -752 -176 -976
WIRE -80 -752 -112 -752
WIRE -48 -752 -80 -752
WIRE -80 -688 -80 -752
WIRE 0 -688 0 -736
WIRE 0 -656 0 -688
WIRE 128 -656 0 -656
WIRE 320 -656 192 -656
WIRE 0 -608 0 -656
WIRE -176 -528 -176 -752
WIRE -80 -528 -112 -528
WIRE -48 -528 -80 -528
WIRE -80 -464 -80 -528
WIRE 0 -464 0 -512
WIRE 736 -448 736 -464
WIRE 832 -448 736 -448
WIRE 736 -432 736 -448
WIRE 944 -432 896 -432
WIRE 1040 -432 944 -432
WIRE 0 -416 0 -464
WIRE 128 -416 0 -416
WIRE 320 -416 192 -416
WIRE 832 -416 816 -416
WIRE 0 -384 0 -416
WIRE 816 -336 816 -416
WIRE 944 -336 944 -432
WIRE 944 -336 816 -336
WIRE 2944 -320 2496 -320
WIRE -176 -304 -176 -528
WIRE -80 -304 -112 -304
WIRE -48 -304 -80 -304
WIRE -640 -288 -640 -1072
WIRE -576 -288 -640 -288
WIRE -480 -240 -480 -304
WIRE -480 -240 -512 -240
WIRE -80 -240 -80 -304
WIRE 0 -240 0 -288
WIRE 2608 -240 2336 -240
WIRE -832 -208 -848 -208
WIRE -576 -192 -768 -192
WIRE -864 -176 -992 -176
WIRE -832 -176 -864 -176
WIRE 0 -176 0 -240
WIRE 1056 -176 0 -176
WIRE 1232 -176 1136 -176
WIRE 1424 -176 1312 -176
WIRE 1488 -176 1424 -176
WIRE 1776 -176 1568 -176
WIRE 2944 -160 2944 -320
WIRE 0 -144 0 -176
WIRE 2608 -112 2608 -240
WIRE 1056 -96 0 -96
WIRE 1424 -96 1136 -96
WIRE 1776 -96 1424 -96
WIRE -640 -80 -640 -288
WIRE -592 -80 -640 -80
WIRE -480 -80 -480 -240
WIRE -480 -80 -528 -80
WIRE -864 -32 -864 -176
WIRE -816 -32 -864 -32
WIRE -640 -32 -640 -80
WIRE -640 -32 -752 -32
WIRE 2496 -32 2496 -320
WIRE 2560 -32 2496 -32
WIRE 2256 -16 2256 -240
WIRE 2608 -16 2256 -16
WIRE 2832 -16 2608 -16
WIRE 2944 -16 2944 -80
WIRE 2944 -16 2832 -16
WIRE -640 48 -640 -32
WIRE -576 48 -640 48
WIRE -480 96 -480 -80
WIRE -480 96 -512 96
WIRE 1232 96 1008 96
WIRE 1328 96 1312 96
WIRE 1408 96 1328 96
WIRE 0 112 0 -96
WIRE 32 112 0 112
WIRE 224 112 112 112
WIRE -832 128 -848 128
WIRE -576 144 -768 144
WIRE 224 144 128 144
WIRE -864 160 -912 160
WIRE -832 160 -864 160
WIRE 0 160 0 112
WIRE 1328 176 1328 96
WIRE 1344 176 1328 176
WIRE 640 192 400 192
WIRE 736 192 640 192
WIRE 1520 192 1408 192
WIRE 1584 192 1520 192
WIRE 1696 192 1584 192
WIRE 1344 208 1328 208
WIRE 128 240 128 224
WIRE 224 240 128 240
WIRE 1072 256 1008 256
WIRE 0 272 0 240
WIRE 32 272 0 272
WIRE 224 272 112 272
WIRE 1168 272 1136 272
WIRE 1232 272 1168 272
WIRE 1328 272 1328 208
WIRE 1328 272 1312 272
WIRE 1408 272 1328 272
WIRE 1520 272 1520 192
WIRE 1520 272 1488 272
WIRE -864 288 -864 160
WIRE -816 288 -864 288
WIRE -640 288 -640 48
WIRE -640 288 -752 288
WIRE 336 288 336 256
WIRE 1072 288 1056 288
WIRE -992 368 -992 -176
WIRE -912 368 -912 160
WIRE 1056 368 1056 288
WIRE 1168 368 1168 272
WIRE 1168 368 1056 368
WIRE -336 400 -416 400
WIRE -416 432 -416 400
WIRE 0 448 0 272
WIRE 224 448 0 448
WIRE -608 480 -624 480
WIRE -480 480 -528 480
WIRE 0 480 0 448
WIRE 0 480 -144 480
WIRE 224 480 128 480
WIRE -144 496 -144 480
WIRE 0 496 0 480
WIRE 496 528 400 528
WIRE -720 576 -720 560
WIRE -624 576 -624 480
WIRE -624 576 -720 576
WIRE -256 576 -256 480
WIRE -192 576 -256 576
WIRE 128 576 128 560
WIRE 224 576 128 576
WIRE -720 592 -720 576
WIRE -560 592 -560 560
WIRE -624 608 -624 576
WIRE -592 608 -624 608
WIRE 0 608 0 576
WIRE 224 608 0 608
WIRE -480 624 -480 480
WIRE -480 624 -528 624
WIRE -416 624 -480 624
WIRE -336 624 -336 400
WIRE -320 624 -336 624
WIRE 336 624 336 592
WIRE -592 640 -624 640
WIRE -720 688 -720 672
WIRE -256 704 -256 672
WIRE -144 704 -144 592
WIRE 0 704 0 608
WIRE -912 736 -912 448
WIRE -624 736 -624 640
WIRE -624 736 -912 736
WIRE 640 736 640 192
WIRE 640 736 -624 736
WIRE -992 784 -992 448
WIRE 1584 784 1584 192
WIRE 1584 784 -992 784
FLAG 912 -576 0
FLAG 1056 -576 0
FLAG 912 -656 +5V
FLAG 1056 -656 -5V
FLAG 256 96 +5V
FLAG 256 288 -5V
FLAG 1200 -576 0
FLAG 1200 -656 +3.3VA
FLAG 336 288 VOFFSET
FLAG 912 -832 0
FLAG 912 -912 V1
FLAG 1024 -912 V2
FLAG 1136 -912 V3
FLAG 1248 -912 V4
FLAG 1360 -912 VG
FLAG 1376 160 0
FLAG 1376 224 +5V
FLAG 288 -1056 V4
FLAG 304 -864 V3
FLAG 320 -656 V2
FLAG 320 -416 V1
FLAG -176 -1232 0
FLAG 96 -1296 VG
FLAG -800 176 +5V
FLAG -800 -160 +5V
FLAG -848 128 ISET
FLAG -848 -208 VSET
FLAG 1488 96 VOFFSET
FLAG -1280 112 0
FLAG -1280 32 VSET
FLAG -1168 112 0
FLAG -1168 32 ISET
FLAG -480 -384 +5V
FLAG 736 272 0
FLAG -800 -224 0
FLAG -800 112 0
FLAG 1696 272 0
FLAG 256 432 +5V
FLAG 256 624 -5V
FLAG 336 624 VOFFSET
FLAG 0 704 0
FLAG 496 528 MEASL
FLAG -144 704 0
FLAG -256 704 0
FLAG -256 400 V1
FLAG -560 656 +5V
FLAG -720 688 0
FLAG -560 560 0
FLAG 864 -400 +5V
FLAG 864 -464 0
FLAG 736 -352 0
FLAG 1040 -432 VOFFSET
FLAG 736 -544 +3.3VA
FLAG 1424 -176 S+
FLAG 1424 -96 S-
FLAG 1008 96 S+
IOPIN 1008 96 In
FLAG 1104 240 0
FLAG 1104 304 +5V
FLAG 1008 256 S-
IOPIN 1008 256 In
FLAG -720 480 +5V
FLAG -784 -944 0
FLAG -1056 -944 0
FLAG -80 -144 0
FLAG -416 432 0
FLAG 2832 -16 0
SYMBOL OpAmps\\AD8421 256 192 R0
SYMATTR InstName U1
SYMBOL res 112 128 R0
SYMATTR InstName R1
SYMATTR Value 680
SYMBOL voltage 912 -672 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value 5
SYMBOL voltage 1056 -672 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value -5
SYMBOL voltage 1200 -672 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V3
SYMATTR Value 3.3
SYMBOL res -16 144 R0
SYMATTR InstName R3
SYMATTR Value 0.05
SYMBOL voltage 912 -928 R0
WINDOW 123 0 0 Left 0
WINDOW 39 -44 136 Left 2
WINDOW 0 -13 55 Left 2
WINDOW 3 -209 50 Left 2
SYMATTR SpiceLine Rser=0.1
SYMATTR InstName V5
SYMATTR Value SINE(12 1 100)
SYMBOL voltage 1024 -928 R0
WINDOW 123 0 0 Left 0
WINDOW 39 -33 138 Left 2
WINDOW 0 -15 56 Left 2
SYMATTR SpiceLine Rser=0.1
SYMATTR InstName V6
SYMATTR Value 12
SYMBOL voltage 1136 -928 R0
WINDOW 123 0 0 Left 0
WINDOW 39 -31 138 Left 2
WINDOW 0 -14 56 Left 2
SYMATTR SpiceLine Rser=0.1
SYMATTR InstName V7
SYMATTR Value 12
SYMBOL voltage 1248 -928 R0
WINDOW 123 0 0 Left 0
WINDOW 39 -34 137 Left 2
WINDOW 0 -14 55 Left 2
SYMATTR SpiceLine Rser=0.1
SYMATTR InstName V8
SYMATTR Value 12
SYMBOL voltage 1360 -928 R0
WINDOW 123 0 0 Left 0
WINDOW 39 -33 138 Left 2
WINDOW 0 -16 53 Left 2
SYMATTR SpiceLine Rser=2
SYMATTR InstName V9
SYMATTR Value 16
SYMBOL OpAmps\\AD8605 1376 256 M180
WINDOW 3 35 85 Left 2
SYMATTR InstName U2
SYMBOL res 1328 80 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value 100k
SYMBOL res 1504 80 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R5
SYMATTR Value 8k45
SYMBOL res 1504 256 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R7
SYMATTR Value 8k45
SYMBOL diode -176 -960 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D1
SYMATTR Value 1N4148
SYMBOL res 16 -928 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R8
SYMATTR Value 2k2
SYMBOL diode -176 -736 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D2
SYMATTR Value 1N4148
SYMBOL res 16 -704 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R9
SYMATTR Value 2k2
SYMBOL diode -176 -512 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D3
SYMATTR Value 1N4148
SYMBOL res 16 -480 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R10
SYMATTR Value 2k2
SYMBOL diode -176 -288 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D4
SYMATTR Value 1N4148
SYMBOL res 16 -256 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R4
SYMATTR Value 2k2
SYMBOL schottky 192 -880 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D5
SYMATTR Value MBR20100CT
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL schottky 192 -672 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D6
SYMATTR Value MBR20100CT
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL schottky 192 -432 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D7
SYMATTR Value MBR20100CT
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL npn -304 -1120 R0
SYMATTR InstName Q1
SYMATTR Value BC817-16
SYMBOL res -336 -1088 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R11
SYMATTR Value 4k7
SYMBOL njf -688 -1296 R0
SYMATTR InstName J1
SYMATTR Value 2N3819
SYMBOL res -656 -1168 R0
SYMATTR InstName R12
SYMATTR Value 1k
SYMBOL res 0 -1312 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R13
SYMATTR Value 100
SYMBOL cap -192 -1296 R0
SYMATTR InstName C1
SYMATTR Value 1µ
SYMBOL npn -512 -288 M0
SYMATTR InstName Q2
SYMATTR Value 2N5550
SYMBOL res -496 -400 R0
SYMATTR InstName R14
SYMATTR Value 2k2
SYMBOL npn -512 48 M0
SYMATTR InstName Q3
SYMATTR Value 2N5550
SYMBOL cap -528 -96 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C2
SYMATTR Value 330p
SYMBOL cap -752 -48 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C3
SYMATTR Value 150p
SYMBOL OpAmps\\AD8605 -800 208 M180
WINDOW 3 35 85 Left 2
SYMATTR InstName U3
SYMBOL OpAmps\\AD8605 -800 -128 M180
WINDOW 3 35 85 Left 2
SYMATTR InstName U4
SYMBOL cap -752 272 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C4
SYMATTR Value 680p
SYMBOL res -928 352 R0
SYMATTR InstName R15
SYMATTR Value 2k2
SYMBOL res -1008 352 R0
SYMATTR InstName R16
SYMATTR Value 2k2
SYMBOL voltage -1168 16 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V10
SYMATTR Value 3
SYMBOL res 1328 256 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R17
SYMATTR Value 100k
SYMBOL res 720 176 R0
SYMATTR InstName R18
SYMATTR Value 2k2
SYMBOL res 1680 176 R0
SYMATTR InstName R19
SYMATTR Value 2k2
SYMBOL OpAmps\\AD8421 256 528 R0
SYMATTR InstName U5
SYMBOL res 112 464 R0
SYMATTR InstName R20
SYMATTR Value 255
SYMBOL res -16 480 R0
SYMATTR InstName R21
SYMATTR Value 1
SYMBOL nmos -192 496 R0
SYMATTR InstName M5
SYMATTR Value irf3710
SYMATTR Prefix X
SYMBOL res -272 384 R0
SYMATTR InstName R22
SYMATTR Value 2k2
SYMBOL res -320 608 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R23
SYMATTR Value 2k2
SYMBOL OpAmps\\AD8605 -560 688 M180
WINDOW 3 35 85 Left 2
SYMATTR InstName U6
SYMBOL OpAmps\\AD8605 864 -368 M180
WINDOW 3 35 85 Left 2
SYMATTR InstName U7
SYMBOL res 720 -560 R0
SYMATTR InstName R24
SYMATTR Value 12k
SYMBOL res 720 -448 R0
SYMATTR InstName R25
SYMATTR Value 75
SYMBOL res 1152 -192 R90
WINDOW 0 -1 71 VBottom 2
WINDOW 3 -26 0 VTop 2
SYMATTR InstName R26
SYMATTR Value 25m
SYMBOL res 1152 -112 R90
WINDOW 0 -2 69 VBottom 2
WINDOW 3 -26 3 VTop 2
SYMATTR InstName R27
SYMATTR Value 25m
SYMBOL res 1328 -192 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 -26 -9 VTop 2
SYMATTR InstName R28
SYMATTR Value 50m
SYMBOL OpAmps\\AD8605 1104 336 M180
WINDOW 3 35 85 Left 2
SYMATTR InstName U8
SYMBOL res -736 464 R0
SYMATTR InstName R29
SYMATTR Value 12k
SYMBOL res -736 576 R0
SYMATTR InstName R30
SYMATTR Value 180
SYMBOL res -512 464 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R31
SYMATTR Value 75k
SYMBOL nmos -48 -1056 R0
SYMATTR InstName M1
SYMATTR Value irf3710
SYMATTR Prefix X
SYMBOL nmos -48 -832 R0
SYMATTR InstName M2
SYMATTR Value irf3710
SYMATTR Prefix X
SYMBOL nmos -48 -608 R0
SYMATTR InstName M3
SYMATTR Value irf3710
SYMATTR Prefix X
SYMBOL nmos -48 -384 R0
SYMATTR InstName M4
SYMATTR Value irf3710
SYMATTR Prefix X
SYMBOL npn -320 576 R0
SYMATTR InstName Q4
SYMATTR Value 2N5550
SYMBOL npn -848 -1072 R0
SYMATTR InstName Q5
SYMATTR Value 2N5550
SYMBOL res -848 -1040 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R32
SYMATTR Value 100
SYMBOL voltage -1056 -1040 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V11
SYMATTR Value PULSE(3 0 50u 0 0 10s 0 1)
SYMBOL res 128 96 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R33
SYMATTR Value 0
SYMBOL res 128 256 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R34
SYMATTR Value 0
SYMBOL ind 1472 -160 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName L1
SYMATTR Value 0.001µ
SYMBOL voltage -1280 16 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V4
SYMATTR Value 0.02
SYMBOL res 16 -160 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R6
SYMATTR Value 2k2
SYMBOL res 2240 -224 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R37
SYMATTR Value 5
SYMBOL voltage 2944 -176 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V12
SYMATTR Value PULSE(0 10 200u 0 0 100u 1 1)
SYMBOL nmos 2560 -112 R0
SYMATTR InstName M6
SYMATTR Value irf3710
SYMATTR Prefix X
SYMBOL current 1776 -176 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName I1
SYMATTR Value PULSE(0.002 2 200u 0 0 100u 1 1)
TEXT -1624 288 Left 2 !.tran 0 0.5m 0 0.01 startup
TEXT -1624 344 Left 2 ;.options abstol=1e-10
TEXT -1616 400 Left 2 ;.options reltol=0.003
TEXT 1088 -248 Left 2 ;Wire
TEXT 1280 -248 Left 2 ;Fuse
TEXT -1616 248 Left 2 !.inc irf3710.lib
TEXT -984 -1112 Left 2 ;Soft start
RECTANGLE Normal 1184 -64 1040 -256 2
RECTANGLE Normal 1376 -64 1232 -256 2
